<!-- this is the get request  -->
<h2>Philadelphia Soup Kitchens</h2>

<section id="new-soupkitchen-button">
    <button id="js-get-new-soupkitchen-form">Add a new soupkitchen</button>

    <!-- ADD THIS FROM JS -- was a link to soupkitchens/new _form -->
    <div id="load-new-soup-kitchen-form"></div>
  </section>

<!-- add soupkitchen data   -->

<section id="soupkitchen-data">
    <ul>
      <% @soupkitchens.each do |soupkitchen| %>
       
          <%= soupkitchen.id %><br>
          <%= soupkitchen.name %><br>
          <%= soupkitchen.address %><br>
          Philadelphia, PA <%= soupkitchen.zipcode %>

          <br>
    <!-- this is a button to a fetch request, and <article> for the data to be put on the page -->
          <button id="js-schedule" data-id="<%= soupkitchen.id %>"> Meal schedule </button> 

         <article id="load-meal-schedule-here"> </article> 
          <br>
     <!-- this is a button to a fetch request -->      
          <button id="js-reviews" data-id="<%= soupkitchen.id %>"> See reviews (and add your own) </button> 
//add link here that goes to the endpoint -- then the js can just take the href from this <a href 
          <article id="load-soupkitchen-comments-here"> </article> 
          
          <br>

      <% end %> 
    </ul> 
 </section> 


<script type="text/javascript" charset="utf-8">

  

document.getElementById('js-reviews').addEventListener('click', getReviews)

function getReviews() {
  debugger
    reviews = `/soupkitchens/${data-id}/comments `;//fix data-id
    fetch(reviews)
    .then((res) => res.json())
    .then((data) => {
      // what to do with the data
      let $reviews = document.getElementById('load-soupkitchen-comments-here');
      // $reviews.attr('data-id').text = ????
    })
       .catch((err) => alert("error"));    
}
          

          
  //now, what about the initial load of the page?? 
    //should there be an api call for that, too?     
       // $("#soupkitchen-" + id).html(data["id"]);
       // $("#soupkitchen-" + name).html(data["name"]);
       // $("#soupkitchen-" + address).html(data["address"]);





</script>
